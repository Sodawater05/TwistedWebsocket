<!DOCTYPE html><html><head><meta charset="utf-8"></head><body><h1>test</h1><input type="text" id="msg"><button class="toto">300</button><button class="titi">500</button><button class="tutu">2000</button><script type="text/javascript">
(function() {
  var q, ws,
    _this = this;

  ws = new WebSocket('ws://127.0.0.1:9999/');

  ws.onopen = function() {
    ws.send("113");
    return ws.send("114");
  };

  ws.onmessage = function(e) {
    return console.log(e);
  };

  ws.onclose = function() {
    return ws.send("disconnected");
  };

  q = document.querySelector('button.toto');

  q.onclick = function() {
    var buf, cpt, msg;
    msg = "0123456789";
    cpt = 0;
    buf = "";
    while (cpt < 30) {
      buf += msg;
      cpt++;
    }
    return ws.send(buf);
  };

  q = document.querySelector('button.titi');

  q.onclick = function() {
    var buf, cpt, msg;
    msg = "0123456789";
    cpt = 0;
    buf = "";
    while (cpt < 50) {
      buf += msg;
      cpt++;
    }
    return ws.send(buf);
  };

  q = document.querySelector('button.tutu');

  q.onclick = function() {
    var buf, cpt, msg;
    msg = "0123456789";
    cpt = 0;
    buf = "";
    while (cpt < 200) {
      buf += msg;
      cpt++;
    }
    return ws.send(buf);
  };

}).call(this);
</script></body></html>